<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scoreboard Editor</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="bootstrap.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <style>
    body{
      background-image: url("images/bg-2.png");
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
      color: white;
    }
  </style>
</head>
<body>

  <dialog id="scoreUpdateDialog" class="align-items-center text-center">
    <img width="100%" src="images/done.gif" alt="">
    <p>Edits are done.</p>
    <button id="closeDialog" class="btn btn-primary">Close</button>
</dialog>


  <div class="main-editor">
    <div class="ttl text-center">
      <h1 class="text-center">Scoreboard Editor</h1>
      <h3 class="text-danger">Update Scores</h3>
    </div>
    <div class="student-sect mt-3">
      <p class="head">STUDENT BASED</p>
      <div class="form-std">
        <form id="submit-form">
          <div class="container">
            <div class="row">
              <div class="col-md-3 std-input">
                <label for="studentCode">ENTER STUDENT CODE</label>
                <input type="text" id="studentCode" name="Student Code">
                <br>
                <input type="text" class="mt-3" id="studentName" name="Student Name" readonly>
              </div>
              <div class="col-md-3 std-input">
                <label for="program">SELECT PROGRAM</label>
                <br>
                <select id="program" name="Program">
                  <option value="">Select</option>
                  <option value="kb1">kb1</option>
                  <option value="kb2">kb2</option>
                  <option value="kb3">kb3</option>
                  <option value="kb4">kb4</option>
                  <option value="kb5">kb5</option>
                  <option value="kb6">kb6</option>
                  <option value="kb7">kb7</option>
                  <option value="kb8">kb8</option>
                  <option value="kb9">kb9</option>
                  <option value="sjb1">sjb1</option>
                  <option value="sjb2">sjb2</option>
                  <option value="sjb3">sjb3</option>
                  <option value="sjb4">sjb4</option>
                  <option value="sjb5">sjb5</option>
                  <option value="sjb6">sjb6</option>
                  <option value="sjb7">sjb7</option>
                  <option value="sjb8">sjb8</option>
                  <option value="sjb9">sjb9</option>
                  <option value="jb1">jb1</option>
                  <option value="jb2">jb2</option>
                  <option value="jb3">jb3</option>
                  <option value="jb4">jb4</option>
                  <option value="jb5">jb5</option>
                  <option value="jb6">jb6</option>
                  <option value="jb7">jb7</option>
                  <option value="jb8">jb8</option>
                  <option value="jb9">jb9</option>
                  <option value="jb10">jb10</option>
                  <option value="jb11">jb11</option>
                  <option value="sb1">sb1</option>
                  <option value="sb2">sb2</option>
                  <option value="sb3">sb3</option>
                  <option value="sb4">sb4</option>
                  <option value="sb5">sb5</option>
                  <option value="sb6">sb6</option>
                  <option value="sb7">sb7</option>
                  <option value="sb8">sb8</option>
                  <option value="sb9">sb9</option>
                  <option value="sb10">sb10</option>
                  <option value="sb11">sb11</option>
                  <option value="sb12">sb12</option>
                  <option value="sb13">sb13</option>
                  <option value="sb14">sb14</option>
                  <option value="sb15">sb15</option>
                  <option value="sb16">sb16</option>
                  <option value="sb17">sb17</option>
                  <option value="sb18">sb18</option>
                  <option value="sb19">sb19</option>
                  <option value="sb20">sb20</option>
                  <option value="sb21">sb21</option>
                  <option value="gb1">gb1</option>
                  <option value="gb2">gb2</option>
                  <option value="gb3">gb3</option>
                  <option value="gb4">gb4</option>
                  <option value="gb5">gb5</option>
                  <option value="gb6">gb6</option>
                          <!-- Girls programs -->
                  <option value="kg1">kg1</option>
                  <option value="kg2">kg2</option>
                  <option value="kg3">kg3</option>
                  <option value="kg4">kg4</option>
                  <option value="kg5">kg5</option>
                  <option value="kg6">kg6</option>
                  <option value="kg7">kg7</option>
                  <option value="kg8">kg8</option>
                  <option value="kg9">kg9</option>
                  <option value="kg10">kg10</option>
                  <option value="sjg1">sjg1</option>
                  <option value="sjg2">sjg2</option>
                  <option value="sjg3">sjg3</option>
                  <option value="sjg4">sjg4</option>
                  <option value="sjg5">sjg5</option>
                  <option value="sjg6">sjg6</option>
                  <option value="sjg7">sjg7</option>
                  <option value="sjg8">sjg8</option>
                  <option value="sjg9">sjg9</option>
                  <option value="jg1">jg1</option>
                  <option value="jg2">jg2</option>
                  <option value="jg3">jg3</option>
                  <option value="jg4">jg4</option>
                  <option value="jg5">jg5</option>
                  <option value="jg6">jg6</option>
                  <option value="jg7">jg7</option>
                  <option value="jg8">jg8</option>
                  <option value="jg9">jg9</option>
                  <option value="jg10">jg10</option>
                  <option value="jg11">jg11</option>
                  <option value="jg12">jg12<option>
                  <option value="jg13">jg13</option>
                  <option value="jg14">jg14</option>
                  <option value="sg1">sg1</option>
                  <option value="sg2">sg2</option>
                  <option value="sg3">sg3</option>
                  <option value="sg4">sg4</option>
                  <option value="sg5">sg5</option>
                  <option value="sg6">sg6</option>
                  <option value="sg7">sg7</option>
                  <option value="sg8">sg8</option>
                  <option value="sg9">sg9</option>
                  <option value="sg10">sg10</option>
                  <option value="sg11">sg11</option>
                  <option value="sg12">sg12</option>
                  <option value="sg13">sg13</option>
                  <option value="sg14">sg14</option>
                  <option value="sg15">sg15</option>
                  <option value="sg16">sg16</option>
                  <option value="sg17">sg17</option>
                  <option value="sg18">sg18</option>
                  <option value="sg19">sg19</option>
                  <option value="sg20">sg20</option>
                  <option value="gg7">gg7</option>
                  <option value="gg8">gg8</option>
                  <option value="gg9">gg9</option>
                  <option value="gg10">gg10</option>
                  <option value="gg11">gg11</option>
                  <option value="gg12">gg12</option>
                  <option value="gg13">gg13</option>
                  <option value="gg14">gg14</option>
                  <option value="gg15">gg15</option>
                  <option value="gg16">gg16</option>
                  <option value="gg17">gg17</option>
                  <option value="gg18">gg18</option>
                  <option value="gg19">gg19</option>

                </select>
                
               
              </div>
              <div class="col-md-3 std-input">
                <label for="points">SELECT POINT</label>
                <br>
                <!-- <input type="number" id="points" name="Point Student"> -->
                <select id="points" name="Point Student">
                  <option value="">Select</option>
                  <option value="20">20</option>
                  <option value="15">15</option>
                  <option value="10">10</option>
                  <option value="8">8</option>
                  <option value="5">5</option>
                  <option value="3">3</option>
                  <option value="1">1</option>
                </select>
              </div>
              <div class="col-md-3 std-input">
                <label for="place">ENTER PLACE</label>
                <br>
                <!-- <input type="text" id="place" name="Place"> -->
                <select id="place" name="Place">
                  <option value="">Select</option>
                  <option value="First">First</option>
                  <option value="Second">Second</option>
                  <option value="Third">Third</option>
                </select>
              </div>
            </div>
          </div>
          <div class="student-sect mt-3">
            <p class="head">GROUP BASED</p>
            <div class="form-std">
              <div class="container">
                <div class="row">
                  <div class="col-md-3 std-input">
                    <label for="team">SELECT TEAM</label>
                    <br>
                    <select id="team" name="Group">
                      <option value="">Select</option>
                      <option value="DUL-FUQAR-B">DUL-FUQAR -B</option>
                      <option value="BUL-BUL-B"> BUL-BUL -B</option>
                      <option value="DUL-DUL-B">DUL-DUL -B</option>
                      <option value="DUL-FUQAR-G">DUL-FUQAR -G</option>
                      <option value="BUL-BUL-G"> BUL-BUL -G</option>
                      <option value="DUL-DUL-G">DUL-DUL -G</option>
                      
                    </select>
                  </div>
                  <div class="col-md-3 std-input">
                    <label for="teamScore">SCORE</label>
                    <br>
                    <input type="number" id="teamScore" name="Score Group" readonly>
                  </div>
                  <div class="col-md-3 std-input">
                    <label for="timeInput">TIME</label>
                    <br>
                    <input type="text" id="timeInput" readonly name="Time">
                  </div>
                  <div class="col-md-3 std-input">
                    <label for="notice">NOTICE</label>
                    <br>
                    <!-- <input type="text" id="notice"> -->
                    <textarea class="form-control" id="notice" rows="3" name="Notice"></textarea>
                    <input class="mt-3" type="text" name="studentProgressLive" id="studentAndProgram" readonly>
                  </div>
                </div>
              </div>
              <h3 class="text-danger text-center" id="message-imp"></h3>
              <div class="button-board mt-5 text-center align-items-center">
                <button id="update-score" class="btn btn-success" type="button">SUBMIT</button>
                <br>
                <button onclick="openScoreboard()" class="btn btn-warning mt-3" type="button">OPEN LIVE SCOREBOARD</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>


  <footer>
    <p>&copy all rights recieved from RHM Vazhayoor <br>
    Developed by <a href="https://haseef-ws.netlify.app" target="_blank">Haseef Muhammed</a> <a href="https://webcraaft.42web.io" target="_blank">Web Craft</a>
    <br>
    &copy 2024
    </p>
  </footer>


  <script>

    // Add score live for 2 inputes

    document.getElementById("points").addEventListener("input", function() {
            document.getElementById("teamScore").value = this.value;
        });

    $("#update-score").click(() => {
        const program = document.getElementById('program').value;
        const team = document.getElementById('team').value;
        const points = parseInt(document.getElementById('teamScore').value);
        const notice = document.getElementById('notice').value;
        const studentAndProgram = document.getElementById('studentAndProgram').value;

        // if (!program || !team || isNaN(points)) {
        //     document.getElementById("message-imp").innerHTML = "Fill the form !!!";
        //     return;
        // }

        const formData = {
            "Program": program,
            "Group": team,
            "Score Group": points,
            "Notice": notice,
            "studentProgressLive": studentAndProgram,
            "Student Code": document.getElementById('studentCode').value,
            "Place": document.getElementById('place').value,
            "Point Student": document.getElementById('points').value,
            "Time": document.getElementById('timeInput').value
        };

        $.ajax({
            url: "https://script.google.com/macros/s/AKfycbxYtV4xxcdXZgSuGfMoaij0CZgnjtSEMqzfoXvU3EJe5tGQVjmM7aPmgwROD0nHmnwQWg/exec",
            data: formData,
            method: "post",
            success: function(response) {
                console.log("Form submitted successfully");
                // Open the dialog on successful submission
                document.getElementById('scoreUpdateDialog').showModal();
            },
            error: function(err) {
                console.log("Form submission error");
            }
        });

        if (scoreboardWindow && !scoreboardWindow.closed) {
            scoreboardWindow.postMessage({ program, team, points, notice, studentAndProgram }, '*');
        } else {
            alert("Please open the scoreboard first.");
        }
    });

    // Close the dialog when the close button is clicked
    document.getElementById('closeDialog').addEventListener('click', function() {
        document.getElementById('scoreUpdateDialog').close();
    });

    let scoreboardWindow;
    function openScoreboard() {
        if (!scoreboardWindow || scoreboardWindow.closed) {
            scoreboardWindow = window.open('scoreboard.html', '_blank', 'width=800,height=600');
        } else {
            scoreboardWindow.focus();
        }
    }
</script>

  <script src="bootstrap.js"></script>
  <script src="script.js"></script>
  <script src="student.js"></script>
</body>
</html>
